(this["webpackJsonpreact-multi-step-form"]=this["webpackJsonpreact-multi-step-form"]||[]).push([[0],{50:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r,i,a=n(1),c=n.n(a),s=n(9),o=n.n(s),u=n(6),l=n(5),d=n(8),m=n(11),j=n.n(m),h=n(2),p=(n(50),n(0)),b=function(e){var t=e.width,n=e.height,r=e.className,i=e.styles,a=r?"loading-skeleton ".concat(r):"loading-skeleton",c=Object(h.a)(Object(h.a)(Object(h.a)({},i),t&&{width:t}),n&&{height:n});return Object(p.jsx)("div",{className:a,style:c})},f=Object(a.memo)(b),O=u.c,v=function(){return Object(u.b)()},g=n(4),x=[],S=Object(g.b)({name:"Recommendations",initialState:x,reducers:{SetRecommendations:function(e,t){return t.payload},ResetRecommendations:function(e){return x}}}),N=S.reducer,y=S.actions,w=y.SetRecommendations,C=y.ResetRecommendations,E=Object(g.b)({name:"Error",initialState:[],reducers:{SetErrors:function(e,t){return t.payload}}}),_=E.reducer,I=E.actions.SetErrors,L={jwt:""},R=Object(g.b)({name:"User",initialState:L,reducers:{SetUser:function(e,t){return{jwt:t.payload.jwt}},ResetUser:function(){return L}}}),T=R.reducer,q=R.actions,k=q.SetUser,A=q.ResetUser,F="https://challenge-dot-popsure-204813.appspot.com",Y="".concat(F,"/user"),B="".concat(F,"/recommendation");function H(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(r){}}function P(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}}!function(e){e.PRIVATE_LIABILITY="Private liability",e.HOME_CONTENT="Home content",e.HEALTH_INSURANCE="Health insurance"}(r||(r={})),function(e){e.MONTH="month",e.YEAR="year"}(i||(i={}));n(52);var Q,U,J=n(23);!function(e){e.SingleLineInput="single-line-input",e.SingleChoiceInput="single-choice-input"}(Q||(Q={})),function(e){e.Text="text",e.Number="number"}(U||(U={}));var D={id:"numberOfChildren",title:"How many childreen do you have?",answer:{mode:Q.SingleLineInput,type:U.Number,placeholder:"Number of Childreen"}},M=[{id:"firstName",title:"What's your first name?",answer:{mode:Q.SingleLineInput,type:U.Text,placeholder:"Your first name"}},{id:"address",title:"What's your address",answer:{mode:Q.SingleLineInput,type:U.Text,placeholder:"Your home address"}},{id:"childrenExist",title:"Do you have children?",answer:{mode:Q.SingleChoiceInput,options:[{group:"childrenExist",label:"Yes",value:"true"},{group:"childrenExist",label:"No",value:"false"}]}},{id:"occupation",title:"What's your occupation?",answer:{mode:Q.SingleChoiceInput,options:[{group:"occupation",label:"Employed",value:"EMPLOYED"},{group:"occupation",label:"Self-Employed",value:"SELF_EMPLOYED"},{group:"occupation",label:"Student",value:"STUDENT"}]}},{id:"email",title:"What's your email?",answer:{mode:Q.SingleLineInput,type:U.Text,placeholder:"Your email address"}}],W={questions:M,total:M.length,currentStep:1,isFirst:!0,isLast:!1},z=Object(g.b)({name:"Stepper",initialState:W,reducers:{AddQuestion:function(e,t){var n=t.payload,r=n.question,i=n.index,a=Object(J.a)(e.questions);return a.splice(i,0,r),Object(h.a)(Object(h.a)({},e),{},{total:a.length,questions:a})},RemoveQuestion:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{total:M.length,questions:e.questions.filter((function(e){return e.id!==t.payload.questionId}))})},SetCurrentStep:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{isFirst:1===t.payload.currentStep,isLast:t.payload.currentStep===e.questions.length,currentStep:t.payload.currentStep})}}}),V=z.reducer,G=z.actions,K=G.AddQuestion,X=G.RemoveQuestion,Z=G.SetCurrentStep,$=function(){var e=v(),t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=n[0],s=n[1],o=O((function(e){return e.recommendations})),u=O((function(e){return e.user.jwt}));Object(a.useEffect)((function(){if(o.length)s(!1);else{var t={Authorization:"Bearer ".concat(u)};j.a.get(B,{headers:t}).then((function(t){s(!1),e(w(t.data)),function(e){H("@mou/recommendations",e)}(t.data)})).catch((function(t){if(t.response)e(I(t.response.data.errors));else{var n=t.toJSON(),r=n.name,i=n.message;e(I([Object(l.a)({},r,[i])]))}s(!1)}))}}),[o,u,e]);var m=function(){localStorage.removeItem("@mou/user"),localStorage.removeItem("@mou/recommendations"),e(C()),e(A()),e(Z({currentStep:1}))};return Object(p.jsx)("div",{className:"recommendations",children:Boolean(o.length)&&!c?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{className:"recommendations__title",children:"We got your recommendations"}),Object(p.jsx)("p",{className:"recommendations__subtitle",children:"Based on your answers, this is what make snese for you and what you should pay"}),Object(p.jsx)("div",{className:"recommendations__list",children:o.map((function(e){var t=e.type,n=e.price,a=n.amount,c=n.periodicity;return Object(p.jsxs)("div",{className:"recommendations__item",children:[Object(p.jsx)("h4",{className:"title",children:r[t]}),Object(p.jsxs)("p",{className:"price",children:["\u20ac",a," per ",i[c]]})]},"".concat(t,"-").concat(n))}))}),Object(p.jsx)("button",{className:"recommendations__reset",onClick:m,children:"Reset"})]}):Object(p.jsxs)("div",{className:"loadingSkeletons",children:[Object(p.jsx)(f,{height:"50px",width:"100%"}),Object(p.jsx)(f,{height:"50px",width:"100%"}),Object(p.jsx)(f,{height:"50px",width:"100%"})]})})},ee=(n(53),function(e){var t=e.currentStep,n=e.children,r=v(),i=O((function(e){return e.stepper.questions})),a=O((function(e){return e.stepper.isFirst})),c=O((function(e){return e.stepper.isLast})),s=t+1,o=t-1;return Object(p.jsxs)("div",{className:"stepper",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsxs)("p",{className:"header__info",children:["Question ",Object(p.jsx)("strong",{children:t})," of ",Object(p.jsx)("strong",{children:i.length})]}),Object(p.jsxs)("div",{className:"header__navigation",children:[Object(p.jsx)("button",{className:"nav-button",disabled:a,onClick:function(){return r(Z({currentStep:o}))},children:"Previous"}),Object(p.jsx)("button",{className:"nav-button",disabled:c,onClick:function(){return r(Z({currentStep:s}))},children:"Next"})]})]}),Object(p.jsx)("div",{className:"stepper__content",children:n[t-1]})]})}),te=function(e){var t=e.id,n=e.value,r=e.title,i=e.answer,a=e.onChange,c=function(e){return a(t,e)};return Object(p.jsxs)("div",{className:"formQuestion",children:[Object(p.jsx)("h1",{children:r}),function(){switch(i.mode){case Q.SingleLineInput:return Object(p.jsx)("input",{type:i.type,placeholder:i.placeholder,value:n,onChange:c,"aria-label":r,"aria-required":"true"});case Q.SingleChoiceInput:return Object(p.jsx)("div",{className:"formQuestion__radio-group",children:i.options.map((function(e){return Object(p.jsxs)("div",{className:"radio-group__option",children:[Object(p.jsx)("input",{type:"radio",id:e.label,value:e.value,name:e.group,onChange:c,checked:n===e.value}),Object(p.jsx)("label",{htmlFor:e.label,children:e.label})]},e.label)}))})}}()]})},ne=Object(a.memo)(te),re=(n(54),function(e){var t=e.size,n=void 0===t?25:t,r={width:"".concat(n,"px"),height:"".concat(n,"px")};return Object(p.jsx)("span",{className:"loadingSpinner",style:Object(h.a)({},r)})}),ie=(n(55),{firstName:"",address:"",childrenExist:"",occupation:"",email:""}),ae=function(){var e=v(),t=O((function(e){return e.stepper.questions})),n=O((function(e){return e.stepper.currentStep})),r=P("@mou/formAnswers"),i=r||ie,c=Object(a.useState)(i),s=Object(d.a)(c,2),o=s[0],u=s[1],m=Object(a.useState)(!1),b=Object(d.a)(m,2),f=b[0],g=b[1],x=function(e,t){var n=t.target.value;u(Object(h.a)(Object(h.a)({},o),{},Object(l.a)({},e,n)))};Object(a.useEffect)((function(){if(""!==o.childrenExist){var n,r="false"!==(c=o.childrenExist)&&!!c,i=Boolean(t.find((function(e){return"numberOfChildren"===e.id})));if(r&&!i)e(K({question:D,index:3})),u(Object(h.a)(Object(h.a)({},o),{},{numberOfChildren:null!==(n=o.numberOfChildren)&&void 0!==n?n:""}));if(!r&&i){e(X({questionId:"numberOfChildren"}));var a=Object(h.a)({},o);delete a.numberOfChildren,u(a)}}var c;H("@mou/formAnswers",o)}),[o,t,e]);var S=t.map((function(e){var t=e.id,n=e.title,r=e.answer;return Object(p.jsx)(ne,{id:t,title:n,answer:r,onChange:x,value:o[t]},t)}));return Object(p.jsxs)("div",{className:"form",children:[Object(p.jsx)(ee,{currentStep:n,children:S}),Object(p.jsxs)("button",{className:"form__submit",disabled:!function(){var e=o.childrenExist,t=o.numberOfChildren;if(!![o.firstName,o.address,o.occupation,o.email].includes(""))return!1;switch(e){case"true":return""!==t;case"false":return void 0===t;case"":default:return!1}}()||f,onClick:function(){e(I([]));var t=o.numberOfChildren,n=o.firstName,r=o.address,i=o.occupation,a=o.email,c={firstName:n,address:r,numberOfChildren:Number(null!==t&&void 0!==t?t:0),occupation:i,email:a};g(!0),j.a.post(Y,c).then((function(t){H("@mou/user",t.data),e(k(t.data)),g(!1)})).catch((function(t){if(t.response)e(I(t.response.data.errors));else{var n=t.toJSON(),r=n.name,i=n.message;e(I([Object(l.a)({},r,[i])]))}g(!1)}))},children:["Submit",f&&Object(p.jsx)(re,{size:20})]})]})},ce=(n(56),function(){var e=O((function(e){return e.errors})),t=Object.entries(e);if(!t.length)return null;var n=t.map((function(e){var t=e[0],n=e[1].toString();return Object(p.jsxs)("p",{role:"alert",className:"message",children:[t,": ",n]},t)}));return Object(p.jsx)("div",{className:"errors",children:n})});n(57);var se=function(){var e=v(),t=P("@mou/recommendations"),n=P("@mou/user"),r=O((function(e){return e.user.jwt}));return Object(a.useEffect)((function(){t&&e(w(t)),n&&e(k(n))}),[]),Object(p.jsxs)("main",{children:[r?Object(p.jsx)($,{}):Object(p.jsx)(ae,{}),Object(p.jsx)(ce,{})]})},oe=Object(g.a)({devTools:!0,reducer:{stepper:V,user:T,recommendations:N,errors:_}}),ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};n(58);o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(u.a,{store:oe,children:Object(p.jsx)(se,{})})}),document.getElementById("root")),ue()}},[[59,1,2]]]);
//# sourceMappingURL=main.c7eff808.chunk.js.map